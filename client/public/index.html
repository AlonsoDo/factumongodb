<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bills-MongoDb</title>
    <script src="js/jquery-2.2.1.min.js"></script>
    <script src="js/company.js"></script>
    <script src="js/client.js"></script>
    <link type="text/css" href="css/mystyle.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/i18n/defaults-*.min.js"></script>

    <script type="text/javascript">
        
        var AuthenticateToken;
        var LastFocus;
        
        $(document).ready(function(){
            
            $('#view2').hide();
            $('#viewcompany').hide();
            $('#viewclient').hide();
            
            DeactiveClient();
            
            $('#login').click(function(){                
                login();                
            });
            
            $('#newCompany').click(function(){
                $('#newCompanyForm').modal({
                    backdrop:'static',
                    keyboard:false  
                });
            });
            
            $('#createCompany').click(function(){                
                createCompany();                          
            });
            
            $('#savecompanydata').click(function(){                
                saveCompanyData();                
            });
            
            $('#companydata').click(function(){                
                $('#viewcompany').show();
                $('#viewclient').hide();                
            });
            
            $('#clientsdata').click(function(){                
                $('#viewcompany').hide();
                $('#viewclient').show();
            });
            
            $('#searchclient').selectpicker({
                style: 'btn-default',
                size: 8
            });
            
            $('#NewClient').click(function(){                
                $('#NewClient').prop('disabled',true);
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
                $('#codeclient').val('0');
                $('#comercialnameclient').val('');
                $('#fiscalnameclient').val('');
                $('#addresclient').val('');
                $('#emailclient').val('');
                $('#postalcodeclient').val('');
                $('#cityclient').val('');
                $('#personalcontactclient').val('');
                $('#nifclient').val('');
                $('#mobilphoneclient').val('');
                $('#workphoneclient').val('');
                UpdateMode = 'New';
                ActiveClient();
            });
            
            $('#SaveClient').click(function(){                
                if (UpdateMode == 'New') {
                    createClient();
                    UpdateMode = 'Update';
                }else{
                    updateClient();
                }                
                $('#SaveClient').prop('disabled',true);
                $('#ResetClient').prop('disabled',true);
                $('#NewClient').prop('disabled',false);
            });
            
            $('#ResetClient').click(function(){
                ResetClient();
            });    
            
            $('#SearchClients').click(function(){                
                searchClients();                
            });
            
            $('#SearchClientsFilter').click(function(){                
                searchClientsFilter();                
            });
            
            $('#NextClient').click(function(){                
                nextClient();                
            });
            
            $('#PrevClient').click(function(){                
                prevClient();                
            });
            
            $('#IniClient').click(function(){                
                iniClient();                
            });
            
            $('#EndClient').click(function(){                
                endClient();                
            });
            
            $('#comercialnameclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#fiscalnameclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#addresclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#emailclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#postalcodeclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#cityclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#personalcontactclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#nifclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#mobilphoneclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
            $('#workphoneclient').focus(function(){
                $('#SaveClient').prop('disabled',false);
                $('#ResetClient').prop('disabled',false);
            });
            
        });
        
    </script>
</head>
<body>
    <div style="width:1000px;">
        <h1 style="float:left; margin-left:30px;">Bills-MongoDb App</h1>
        <h1 id="companyTitle" style="float:left; margin-left:30px;">Your company name</h1>
    </div>
    <div id="view1" style="float:left; width:1000px;">
        <div id="logincontainer" style="float:left; background-color:#e8e8e8; border:6px white solid; width:300px; height:474px; margin-top:64px; margin-left:30px; float:left;">
            <label style="margin:20px 0px 0px 6px; display:block; float:left; font-weight:bold; font-size:20px;">Email</label>
            <input type="text" id="email" class="form-control" maxlength="100" placeholder="Intro email" style="float:left; margin-left:6px; margin-top:0px; width:277px; font-weight:bold; font-size:20px;"/>
            <label style="margin:20px 0px 0px 6px; display:block; float:left; font-family:Arial,Helvetica,sans-serif; font-weight:bold; font-size:20px;">Password</label>
            <input type="password" id="pass" class="form-control" maxlength="20" placeholder="Intro password" style="float:left; margin-left:6px; margin-top:0px; width:277px; font-weight:bold; font-size:20px;"/>
            <button type="button" id="login" class="btn btn-default btn-lg" style="float:left; margin-left:7px; margin-top:20px;">
                <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span> Login
            </button>
            <button type="button" id="newCompany" class="btn btn-default btn-lg" style="float:left; margin-left:7px; margin-top:20px;">
                <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Register
            </button>
            <a href="#" id="recoverpassword" style="float:left; margin-left:28px; margin-top:20px; font-weight:bold; font-size:20px;">Recover password</a>
        </div>
        <img id="imglogo" src="/img/logo.jpg" style="float:left;">
    </div>
    <div id="view2" style="float:left; background-color:#e8e8e8; border:0px black solid; width:1000px; height:40px; margin-top:6px;">
        <a href="#" id="companydata" style="float:left; margin-left:16px; margin-top:10px; margin-right:12px; font-weight:bold; font-size:16px;">Company</a>            
        <a href="#" id="clientsdata" style="float:left; margin-left:16px; margin-top:10px; margin-right:12px; font-weight:bold; font-size:16px;">Clients</a>            
        <a href="#" id="productsdata" style="float:left; margin-left:16px; margin-top:10px; margin-right:12px; font-weight:bold; font-size:16px;">Products</a>            
        <a href="#" id="billsdata" style="float:left; margin-left:16px; margin-top:10px; margin-right:12px; font-weight:bold; font-size:16px;">Bills</a>            
        <a href="#" id="browsedata" style="float:left; margin-left:16px; margin-top:10px; margin-right:12px; font-weight:bold; font-size:16px;">Browse</a>            
    </div>
    <!-- Company -->
    <div id="viewcompany" style="float:left; background-color:#e8e8e8; border:0px black solid; width:1000px; height:340px; margin-top:16px;">
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Comercial name:</label>
        <input type="text" id="comercialname" class="form-control" maxlength="200" placeholder="Intro comercial name" style="float:left; margin-left:6px; margin-top:20px; width:330px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Fiscal name:</label>
        <input type="text" id="fiscalname" class="form-control" maxlength="200" placeholder="Intro fiscal name" style="float:left; margin-left:6px; margin-top:20px; width:330px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Adress:</label>
        <input type="text" id="addres" class="form-control" maxlength="400" placeholder="Intro adress" style="float:left; margin-left:6px; margin-top:20px; width:862px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Postal code:</label>
        <input type="text" id="postalcode" class="form-control" maxlength="5" placeholder="00000" style="float:left; margin-left:6px; margin-top:20px; width:80px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">City:</label>
        <input type="text" id="city" class="form-control" maxlength="50" placeholder="Intro city" style="float:left; margin-left:6px; margin-top:20px; width:426px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">NIF:</label>
        <input type="text" id="nif" class="form-control" maxlength="10" placeholder="Intro nif" style="float:left; margin-left:6px; margin-top:20px; width:180px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Mobil phone:</label>
        <input type="text" id="mobilphone" class="form-control" maxlength="15" placeholder="Intro mobil phone" style="float:left; margin-left:6px; margin-top:20px; width:180px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Work phone:</label>
        <input type="text" id="workphone" class="form-control" maxlength="15" placeholder="Intro work phone" style="float:left; margin-left:6px; margin-top:20px; width:180px; font-weight:bold; font-size:16px;"/>
        <hr class="colored" style="margin-top:240px;"/>
        <button type="button" id="savecompanydata" class="btn btn-default btn-lg" style="float:left; margin-left:30px; margin-top:5px;">
            <span class="glyphicon glyphicon-save" aria-hidden="true"></span> Save changes
        </button>
        <button type="button" id="resetcompanydata" class="btn btn-default btn-lg" style="float:left; margin-left:30px; margin-top:5px;">
            <span class="glyphicon glyphicon-random" aria-hidden="true"></span> Reset
        </button>
    </div>
    <!-- Client -->
    <div id="viewclient" style="float:left; background-color:#e8e8e8; border:0px black solid; width:1000px; height:420px; margin-top:16px;">
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Comercial name:</label>
        <input type="text" id="comercialnameclient" class="form-control" maxlength="200" placeholder="Intro comercial name" style="float:left; margin-left:6px; margin-top:20px; width:330px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Fiscal name:</label>
        <input type="text" id="fiscalnameclient" class="form-control" maxlength="200" placeholder="Intro fiscal name" style="float:left; margin-left:6px; margin-top:20px; width:330px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Adress:</label>
        <input type="text" id="addresclient" class="form-control" maxlength="300" placeholder="Intro adress" style="float:left; margin-left:6px; margin-top:20px; width:502px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Email:</label>        
        <input type="text" id="emailclient" class="form-control" maxlength="100" placeholder="Intro email adress" style="float:left; margin-left:6px; margin-top:20px; width:276px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Postal code:</label>
        <input type="text" id="postalcodeclient" class="form-control" maxlength="5" placeholder="00000" style="float:left; margin-left:6px; margin-top:20px; width:80px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">City:</label>
        <input type="text" id="cityclient" class="form-control" maxlength="50" placeholder="Intro city" style="float:left; margin-left:6px; margin-top:20px; width:251px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Personal contact:</label>
        <input type="text" id="personalcontactclient" class="form-control" maxlength="100" placeholder="Intro personal contact" style="float:left; margin-left:6px; margin-top:20px; width:251px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">NIF:</label>
        <input type="text" id="nifclient" class="form-control" maxlength="10" placeholder="Intro nif" style="float:left; margin-left:6px; margin-top:20px; width:180px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Mobil phone:</label>
        <input type="text" id="mobilphoneclient" class="form-control" maxlength="15" placeholder="Intro mobil phone" style="float:left; margin-left:6px; margin-top:20px; width:180px; font-weight:bold; font-size:16px;"/>
        <label style="margin:25px 0px 0px 30px; display:block; float:left; font-weight:bold; font-size:16px;">Work phone:</label>
        <input type="text" id="workphoneclient" class="form-control" maxlength="15" placeholder="Intro work phone" style="float:left; margin-left:6px; margin-top:20px; width:180px; font-weight:bold; font-size:16px;"/>
        <hr class="colored" style="margin-top:240px;"/>
        <button type="button" id="IniClient" disabled class="btn btn-default btn-lg" title="Ini" style="margin-left:50px; float:left;"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"></span></button>
        <button type="button" id="PrevClient" disabled class="btn btn-default btn-lg" title="Prev" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button>
        <button type="button" id="NextClient" disabled class="btn btn-default btn-lg" title="Next" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button>
        <button type="button" id="EndClient" disabled class="btn btn-default btn-lg" title="End" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span></button>
        <button type="button" id="NewClient" class="btn btn-default btn-lg" title="New" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></button>
        <button type="button" id="DeleteClient" disabled class="btn btn-default btn-lg" title="Delete" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></button>
        <button type="button" id="SaveClient" disabled class="btn btn-default btn-lg" title="Save" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>
        <button type="button" id="ResetClient" disabled class="btn btn-default btn-lg" title="Reset" style="margin-left:10px; float:left;"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
        <label style="margin-left:50px;  margin-top:16px; display:block; float:left; font-weight:bold; font-size:16px;">Client code:</label>
        <input type="text" id="codeclient" readonly class="form-control" maxlength="5" placeholder="00000" style="float:left; margin-left:6px; margin-top:10px; width:80px; font-weight:bold; font-size:16px;"/>
        <div class="row" style="margin-left:40px; margin-top:30px;">
            <div class="col-xs-3">
                <div class="form-group">                    
                </div>
            </div>
        </div>
        <div class="row" style="margin-left:36px; margin-top:30px;">
            <div class="col-xs-3">
                <div class="form-group">
                    <select id="searchclient" class="selectpicker form-control">
                        <option value="clientId" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>Client code</label>">Client code</option>
                        <option value="comercialnameclient" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>Comercial name</label>">Comercial name</option>
                        <option value="email" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>Email</label>">Email</option>
                        <option value="postalcodeclient" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>Postal code</label>">Postal code</option>
                        <option value="cityclient" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>City</label>">City</option>
                        <option value="nifclient" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>NIF</label>">NIF</option>
                        <option value="mobilphoneclient" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>Mobil phone</label>">Mobil phone</option>
                        <option value="workphoneclient" data-content="<label style='color:black; font-weight:bold; font-size:16px;'>Work phone</label>">Work phone</option>
                    </select>                    
                </div>                
            </div>            
            <div class="col-xs-3">
                <div class="form-group">            
                    <input type="text" id="contentsearchclient" class="form-control" maxlength="200" placeholder="Search client" style="float:left; margin-left:16px; margin-top:8px; width:330px; font-weight:bold; font-size:16px;"/>
                </div>                
            </div>
            <div class="col-xs-2">
                <div class="form-group">            
                    <button type="button" id="SearchClients" class="btn btn-default btn-lg" title="Search clients" style="margin-left:120px; float:left;"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                </div>                
            </div>
            <div class="col-xs-2">
                <div class="form-group">            
                    <button type="button" id="SearchClientsFilter" class="btn btn-default btn-lg" title="Filter clients" style="margin-left:20px; float:left;"><span class="glyphicon glyphicon-filter" aria-hidden="true"></span></button>
                </div>                
            </div>
        </div>        
    </div>
    <!-- Modal Informacion -->
    <div class="modal fade" id="dialoginfo" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div id="colortitulo" class="modal-header modal-header-info">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 id="titulo" class="modal-title">Informaction</h4>
                </div>
                <div class="modal-body">
                    <p id="mensage" style="font-family:Arial,Helvetica,sans-serif; font-weight:bold; font-size:16px;" >This is a small modal.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Cerrar</button>
                </div>
            </div>            
        </div>
    </div>    
    <!-- Modal  New Company-->
    <div class="modal fade" id="newCompanyForm" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:350px;">
            <div class="modal-content">                
                <!-- Modal Header -->
                <div class="modal-header modal-header-info">
                    <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">&times;</span>
                            <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Create new company</h4>
                </div>                
                <!-- Modal Body -->
                <div class="modal-body">                    
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label  class="col-sm-2 control-label" for="email">Email</label>
                            <div class="col-sm-10">
                                <input type="email" class="form-control" id="email1" maxlength="100" placeholder="Enter email adress" style="font-weight:bold; font-size:16px;"/>
                            </div>
                        </div>                        
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="inputPassword1" >Password</label>
                            <div class="col-sm-10">
                                <input type="password" class="form-control" id="pass1" maxlength="30" placeholder="Enter password" style="font-weight:bold; font-size:16px;"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="inputPassword2" >Repeat password</label>
                            <div class="col-sm-10">
                                <input type="password" class="form-control" id="pass2" maxlength="30" placeholder="Repeat password" style="font-weight:bold; font-size:16px;"/>
                            </div>
                        </div>
                    </form>                    
                </div>                
                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-lg" data-dismiss="modal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Close</button>
                    <button type="button" id="createCompany" class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-save" aria-hidden="true"></span> Save company</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
